<app-titulo [titulo]="'Eventos'"></app-titulo>

<div class="form-inline">
  <div class="form-group mb-2">
    <input
      type="text"
      name="filter"
      class="form-control mr-2 mb-2"
      placeholder="Digite o filtro desejado"
      [(ngModel)]="filterList"
    />
  </div>
</div>

<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>
          <button
            class="btn btn-outline-info btn-sm"
            (click)="handleHideImage()"
          >
            <i class="fa-solid fa-eye" *ngIf="!hideImage"></i>
            <i class="fa-solid fa-eye-slash" *ngIf="hideImage"></i>
          </button>
        </th>
        <th>#</th>
        <th>Tema</th>
        <th>Local</th>
        <th>Data</th>
        <th>Qtd pessoas</th>
        <th>Lote</th>
        <th>Opções</th>
      </tr>
    </thead>
    <tbody *ngIf="eventos && eventos.length">
      <tr *ngFor="let evento of filteredEvents">
        <td class="">
          <img
            class="img-fluid img-thumbnail rounded mx-auto"
            src="{{ evento.imagemURL }}"
            [style.width.em]="10"
            alt="Imagem do evento"
            loading="lazy"
            [collapse]="!hideImage"
          />
        </td>
        <td>{{ evento.id }}</td>
        <td>{{ evento.tema }}</td>
        <td>{{ evento.local }}</td>
        <td>{{ evento.dataEvento | DateTimeFormat }}</td>
        <td>{{ evento.qtdPessoas }}</td>
        <td>{{ evento.lotes[0].nome }}</td>
        <td>
          <button
            type="button"
            class="btn btn-outline-warning btn-sm mx-3"
            tooltip="Editar"
            [adaptivePosition]="false"
            placement="top"
          >
            <i class="fa-solid fa-edit"></i>
          </button>

          <button
            type="button"
            class="btn btn-outline-danger btn-sm"
            tooltip="Remover"
            (click)="openModal(template)"
          >
            <i class="fa-solid fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
    <tfoot *ngIf="!eventos.length">
      <tr>
        <td colspan="8" class="text-center">
          <h4>Nenhum evento encontrado</h4>
        </td>
      </tr>
    </tfoot>
  </table>
</div>

<ng-template #template>
  <div class="modal-body text-center">
    <p>Tem certeza que quer remover este elemento?</p>
    <button
      type="button"
      class="btn btn-outline-dark btn-sm m-2"
      (click)="confirm()"
    >
      Sim
    </button>
    <button
      type="button"
      class="btn btn-outline-dark btn-sm"
      (click)="decline()"
    >
      Não
    </button>
  </div>
</ng-template>
